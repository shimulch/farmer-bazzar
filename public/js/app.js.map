{"version":3,"sources":["main.js","controllers/AuthController.js","controllers/CategoryProductController.js","controllers/HomeController.js","controllers/NavbarController.js","controllers/RegisterController.js","controllers/SearchBoxController.js","controllers/SearchController.js","controllers/SingleProductController.js","controllers/UploadProductController.js","controllers/UserController.js","directives/FileDirective.js","services/fileUpload.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["angular.module('checkmate', ['ui.router', 'ui.bootstrap', 'satellizer', 'angular-loading-bar', 'angular-input-stars']);\n\n\nangular.module('checkmate').config(['$stateProvider', '$urlRouterProvider', '$authProvider', function ($stateProvider, $urlRouterProvider, $authProvider){\n\t\n\t$authProvider.loginUrl = '/api/authenticate';\n\n\t$urlRouterProvider.otherwise(\"/\");\n\t\n\t$stateProvider\n\t\t.state('home', {\n\t\t\turl: '/',\n\t\t\ttemplateUrl: '/tpl/home.html',\n\t\t\tcontroller: 'HomeController'\n\t\t})\n\t\t.state('login', {\n\t\t\turl:'/login',\n\t\t\ttemplateUrl: '/tpl/login.html',\n\t\t\tcontroller: 'AuthController as auth'\n\t\t})\n\t\t.state('register', {\n\t\t\turl:'/register',\n\t\t\ttemplateUrl: '/tpl/register.html',\n\t\t\tcontroller: 'RegisterController as register'\n\t\t})\n\t\t.state('upload-product', {\n\t\t\turl: '/upload-product',\n\t\t\ttemplateUrl: '/tpl/upload-product.html',\n\t\t\tcontroller: 'UploadProductController'\n\t\t})\n\t\t.state('singleProduct', {\n\t        url: \"/product/:productId\",\n\t        templateUrl: '/tpl/product-show.html',\n\t        controller: 'SingleProductController'\n\t    })\n\t    .state('singleCategory', {\n\t        url: \"/category/:categorySlug/products\",\n\t        templateUrl: '/tpl/category-show.html',\n\t        controller: 'CategoryProductController'\n\t    })\n\t    .state('search', {\n\t        url: \"/search?main_category&distrcit&search\",\n\t        templateUrl: '/tpl/search.html',\n\t        controller: 'SearchController',\n\t        reload: true\n\t    })\n\t\t.state('logout', {\n\t\t\turl:'/logout',\n\t\t\tcontroller: function($auth, $rootScope, $state){\n\t\t\t\t$rootScope.loggedIn = false;\n\t\t\t\t$auth.logout().then(function(){\n\t\t\t\t\t$state.go('home');\n\t\t\t\t});\n\n\t\t\t}\n\t\t})\n\t\t.state('edit', {\n\t\t\turl: '/edit',\n\t\t\ttemplateUrl:'/tpl/edit.html',\n\t\t\tcontroller: 'UserController'\n\t\t});\n\n}]);\n","angular.module('checkmate').controller('AuthController', ['$auth', '$state', '$rootScope', function($auth, $state, $rootScope){\n\n\tvar vm = this;\n            \n    vm.login = function() {\n\n        var credentials = {\n            phone_no: vm.phone_no,\n            password: vm.password\n        }\n        \n        // Use Satellizer's $auth service to login\n        $auth.login(credentials).then(function(data) {\n        \t$rootScope.loggedIn = true;\n            // If login is successful, redirect to the users state\n            $state.go('home');\n        });\n    }\n\n    vm.logout = function(){\n    \t$auth.logout().then(function(){\n    \t\t$state.go('home');\n    \t});\n    }\n\n}]);","angular.module('checkmate').controller('CategoryProductController', ['$http', '$scope', '$stateParams', '$rootScope', function($http, $scope, $stateParams, $rootScope){\n\n\t$http.get('/api/list-categories/' + $stateParams.categorySlug + '/products').then(function(response){\n\t\t\n\t\t$scope.products = response.data;\n\n\n\t\t\t\n\t});\n\t$scope.calc = function(ratings){\n\t\tvar total = 0;\n\t\tfor(var i = 0; i<ratings.length; i++){\n\t\t\ttotal += ratings[i].rating;\n\t\t}\n\t\tconsole.log(total);\n\t\t$scope.rate = (total/ratings.length);\n\t};\n\n\t$scope.isReadonly = !$rootScope.loggedIn;\n\t\n\t$scope.doRate = function (itemId){\n\t\tconsole.log($scope.rate);\n\t\t$http.post('/api/products/'+itemId+'/ratings', {rating: $scope.rate}).then(function(response){\n\t\t\tconsole.log(response);\n\t\t});\n\n\t};\n\t\n}]);","angular.module('checkmate').controller('HomeController', ['$http', '$scope', '$state', function($http, $scope, $state){\n\n\t$http.get('/api/products').then(function(response){\n\t\t$scope.products = response.data;\n\t\tconsole.log(response);\n\t\t\n\t});\n\n}]);","angular.module('checkmate').controller('NavbarController', ['$http', '$rootScope',  '$scope', '$location', '$auth', function($http, $rootScope, $scope, $location, $auth){\n\n\t$scope.isActive = function (viewLocation) { \n        return viewLocation === $location.path();\n    };\n\n    $http.get('/api/list-categories').then(function(response){\n    \t$rootScope.categories = response.data;\n    \t//console.log($rootScope.categories);\n    });\n    \n    $rootScope.loggedIn = $auth.isAuthenticated();\n}]);","angular.module('checkmate').controller('RegisterController', ['$http', '$scope', '$state', function($http, $scope, $state){\n\n\t$scope.submit = function(){\n\t\tvar data = {\n\t\t\tname: $scope.name,\n\t\t\tphone_no: $scope.phone_no,\n\t\t\thouse: $scope.house,\n\t\t\tvillage: $scope.village,\n\t\t\tpost_office: $scope.post_office,\n\t\t\tpost_code: $scope.post_code,\n\t\t\tthana: $scope.thana,\n\t\t\tdistrict: $scope.district,\n\t\t\tpassword: $scope.password,\n\t\t\tconfirm_password: $scope.confirm_password\n\t\t};\n\n\t\t$http.post('/api/register', data)\n\t\t\t.success(function(response){\n\t\t\t\t$state.go('login');\n\t\t\t}).error(function(response){\n\t\t\t\tconsole.log(response);\n\t\t\t\t$scope.formErrors = response.errors;\n\t\t\t});\n\t}\n\n}]);","angular.module('checkmate').controller('SearchBoxController', ['$window', '$http', '$scope', '$state', '$rootScope', function($window, $http, $scope, $state, $rootScope){\n\n\t$http.get('/api/districts').then(function(response){\n\t\t$scope.districts = response.data;\n\t});\n\t\n\t$scope.main_category = \"\";\n\t$scope.district = \"\";\n\t$scope.searchText = \"\";\n\t$rootScope.paginate = {\n            page: 1,\n            take: 10\n        };\n\t$scope.search = function(){\n\t\tvar url = '/#/search?';\n\t\turl = url+'main_category=' + $scope.main_category + '&district=' + $scope.district + '&search=' + $scope.searchText;\n\t\t\n\t\t$http.get('/api/products/search?main_category='+$scope.main_category+'&district='+$scope.district+'&search='+$scope.searchText+'&page='+$rootScope.paginate.page+'&take='+$rootScope.paginate.take).then(function(response){\n\t\t\t$rootScope.searchProducts = response.data.products;\n\t\t\t$rootScope.paginate.pages = response.data.total;\n\t\t});\n\t\t$window.location.href = url;\n\t};\n\n\n\t$scope.nextPage = function() {\n                if ($rootScope.paginate.page < $rootScope.paginate.pages) {\n                    $rootScope.paginate.page++;\n                    $scope.search();\n                }\n            };\n            \n    $scope.previousPage = function() {\n        if ($rootScope.paginate.page > 1) {\n            $rootScope.paginate.page--;\n            $scope.search();\n        }\n    };\n\t\n}]);","angular.module('checkmate').controller('SearchController', [ '$location', '$http', '$rootScope', '$state', function($location, $http, $rootScope, $state){\n\n\t\n}]);","angular.module('checkmate').controller('SingleProductController', ['$http', '$scope', '$stateParams', function($http, $scope, $stateParams){\n\n\tconsole.log($stateParams);\n\t$http.get('/api/products/' + $stateParams.productId).then(function(response){\n\t\t\n\t\t$scope.product = response.data;\n\t\t\t\n\t});\n\n}]);","angular.module('checkmate').controller('UploadProductController', [ 'fileUpload', '$scope', '$http', '$rootScope', function( fileUpload, $scope, $http, $rootScope){\n\n    $scope.title =\"\";\n    $scope.main_category=\"\";\n    $scope.price = 0;\n    $scope.quantity = 0;\n    $scope.expiry_date = new Date();\n    console.log($scope.expiry_date);\n    $scope.sub_category = \"\";\n\t$scope.findSubCategory = function(){\n\t\t$http.get('/api/list-categories/'+ $scope.main_category).then(function(response){\n\t\t\t$scope.subCategories = response.data;\n\t\t\t$scope.sub_category = $scope.subCategories[0].id;\n\t\t\tconsole.log($scope.subCategories);\n\t\t});\n\t};\n\n\t$scope.pricing_type = 'প্রতি কেজি';\n\t$scope.unit = 'কেজি';\n\n\t$scope.upload = function(){\n        var file = $scope.myFile;\n        console.log('file is ' );\n        console.dir(file);\n        var uploadUrl = \"/api/products\";\n    \n        var fd = new FormData();\n        fd.append('file', file);\n\n        fd.append('title', $scope.title);\n        fd.append('main_category', $scope.main_category);\n        fd.append('sub_category', $scope.sub_category);\n        fd.append('price', $scope.price);\n        fd.append('pricing_type', $scope.pricing_type);\n        fd.append('quantity', $scope.quantity);\n        fd.append('unit', $scope.unit);\n        fd.append('expiry_date', $scope.expiry_date);\n        \n        $http.post(uploadUrl, fd, {\n            transformRequest: angular.identity,\n            headers: {'Content-Type': undefined}\n        }).success(function(response){\n            console.log(response);\n        })\n        .error(function(response){\n            $scope.formErrors = response.errors;\n            console.log(response);\n        });;\n    };\n}]);","angular.module('checkmate').controller('UserController', ['fileUpload', '$scope', '$http', '$auth', '$state', function(fileUpload, $scope, $http, $auth, $state){\n\n\t$http.get('/api/user-data').success(function(response){\n\t\t$scope.userData = response;\n\t\tconsole.log(response);\n\t}).error(function(response){\n\t\tconsole.log(response);\n\t\t//$state.go('/login');\n\t});\n\t\n\n\t$scope.upload = function(){\n        var file = $scope.myFile;\n       \n        var uploadUrl = \"/api/change-profile-picture\";\n    \n        var fd = new FormData();\n        fd.append('file', file);\n        \n        $http.post(uploadUrl, fd, {\n            transformRequest: angular.identity,\n            headers: {'Content-Type': undefined}\n        }).success(function(response){\n            $scope.userData = response;\n        })\n        .error(function(response){\n            $scope.formErrors = response.errors;\n            console.log(response);\n        });;\n    };\n\n}]);","angular.module('checkmate').directive('fileModel', ['$parse', function ($parse) {\n    return {\n        restrict: 'A',\n        link: function(scope, element, attrs) {\n            var model = $parse(attrs.fileModel);\n            var modelSetter = model.assign;\n            \n            element.bind('change', function(){\n                scope.$apply(function(){\n                    modelSetter(scope, element[0].files[0]);\n                });\n            });\n        }\n    };\n}]);","angular.module('checkmate').service('fileUpload', ['$http', function ($http) {\n    this.uploadFileToUrl = function(file, uploadUrl, data){\n        var fd = new FormData();\n        fd.append('file', file);\n\n        fd.append('data', angular.toJson(data));\n        return $http.post(uploadUrl, fd, {\n            transformRequest: angular.identity,\n            headers: {'Content-Type': undefined}\n        });\n    }\n}]);"],"sourceRoot":"/source/"}